> aka httpd.
> 

> The most widely used web server.
> 

> Supports modules (`mod_proxy`, `mod_rewrite`) for reverse proxying and load balancing.
> 

> More traditional, with a process/thread-based model (vs. **Nginx’s event-driven model**).
> 

QA:

- …

## Index

## Use Cases

> …
> 

## Architecture

> …
> 

### **Core Engine**

- **Multi-Processing Module (MPM)**:
    - Handles connection management and request processing.
    - Different MPMs are available for different operating systems and use cases:
        - **Prefork**: A non-threaded, process-based MPM (suitable for compatibility with non-thread-safe libraries).
        - **Worker**: A hybrid multi-process, multi-threaded MPM (better performance for high traffic).
        - **Event**: An optimized MPM for handling high concurrency with keep-alive connections.
- **Configuration System**:
    - Apache uses text-based configuration files (e.g., `httpd.conf`, `apache2.conf`) to define server behavior.
    - Configuration directives control everything from listening ports to module loading.
- **Logging System**:
    - Apache provides flexible logging mechanisms, including access logs, error logs, and custom logs.

### **Modules**

- Apache's functionality is extended through **dynamically loadable modules**.
- Modules can be enabled or disabled as needed, allowing for a lightweight or feature-rich server.
- Examples of modules:
    - **mod_ssl**: Adds SSL/TLS support for secure HTTPS connections.
    - **mod_rewrite**: Provides URL rewriting capabilities.
    - **mod_proxy**: Enables proxying and load balancing.
    - **mod_auth**: Handles authentication and authorization.

## **Request Processing Cycle**

Apache processes HTTP requests in a well-defined cycle. The key phases are:

### **a. Connection Handling**

- The MPM accepts incoming connections and manages them (e.g., spawning processes or threads).

### **b. Request Parsing**

- Apache parses the HTTP request headers and determines the appropriate virtual host and configuration.

### **c. URL Mapping**

- The request URL is mapped to a filesystem path or a handler (e.g., static files, CGI scripts, or proxied requests).

### **d. Authentication and Authorization**

- If configured, Apache checks the client's credentials and permissions.

### **e. Content Generation**

- The requested resource is processed:
    - Static files are served directly.
    - Dynamic content is generated by handlers (e.g., PHP, CGI, or proxied requests).

### **f. Logging**

- The request and response are logged according to the server's configuration.

### **g. Connection Cleanup**

- The connection is closed or kept alive for further requests (if keep-alive is enabled).

## **Modules**

> **FastCGI** in Apache HTTPD is implemented as a **module**, specifically the `mod_fcgid` or `mod_fastcgi` module.
> 

> Apache's modular design allows it to be highly customizable. Key aspects of the modular architecture include:
> 

### **a. Core Modules**

- These modules provide essential functionality and are typically included in most installations:
    - **mod_core**: Core functionality (e.g., configuration directives).
    - **mod_so**: Support for dynamically loading modules.
    - 

### **b. Optional Modules**

- These modules add specific features and can be enabled or disabled as needed:
    - **mod_ssl**: SSL/TLS support.
    - **mod_rewrite**: URL rewriting.
    - **mod_proxy**: Proxying and load balancing.
    - **mod_security**: Web application firewall (WAF) functionality.

### **c. Third-Party Modules**

- Developers can create custom modules to extend Apache's functionality.

## **Performance and Scalability**

Apache is designed to handle a wide range of workloads, from small personal websites to large-scale enterprise applications:

- **MPM Selection**:
    - Choosing the right MPM (e.g., Prefork, Worker, Event) is critical for performance.
- **Caching**:
    - Modules like `mod_cache` and `mod_disk_cache` improve performance by caching content.
- **Load Balancing**:
    - The `mod_proxy_balancer` module enables load balancing across multiple backend servers.

### **Security**

Apache includes several security features to protect web applications:

- **SSL/TLS Support**:
    - Provided by the `mod_ssl` module.
- **Authentication and Authorization**:
    - Modules like `mod_auth` and `mod_authz` control access to resources.
- **Web Application Firewall (WAF)**:
    - Provided by third-party modules like `mod_security`.

## Build

> …
> 

## Debug

> …
> 

## References

- [C](https://www.notion.so/C-8655c4697ccf46dab526d2c63f25652c?pvs=21)
- https://github.com/apache/httpd
- [GNU Autotools](https://www.notion.so/GNU-Autotools-8b169ead48264a9d8fac1fe26c023010?pvs=21)
- [GCC : GNU Compiler Collection](https://www.notion.so/GCC-GNU-Compiler-Collection-81de263588f8499c8479ddd729a4c045?pvs=21)
- https://httpd.apache.org/
- https://httpd.apache.org/docs/trunk/
